{"version":3,"file":"js/303.781adeb1.js","mappings":"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","sources":["webpack://toutiao-two/./src/views/user-profile/index.vue","webpack://toutiao-two/./src/views/user-profile/components/updata-name.vue","webpack://toutiao-two/src/views/user-profile/components/updata-name.vue","webpack://toutiao-two/./src/views/user-profile/components/updata-name.vue?1c5f","webpack://toutiao-two/./src/views/user-profile/components/updata-name.vue?92f5","webpack://toutiao-two/./src/views/user-profile/components/updata-gender.vue","webpack://toutiao-two/src/views/user-profile/components/updata-gender.vue","webpack://toutiao-two/./src/views/user-profile/components/updata-gender.vue?30ef","webpack://toutiao-two/./src/views/user-profile/components/updata-gender.vue?6ada","webpack://toutiao-two/./src/views/user-profile/components/updata-birthday.vue","webpack://toutiao-two/src/views/user-profile/components/updata-birthday.vue","webpack://toutiao-two/./src/views/user-profile/components/updata-birthday.vue?448b","webpack://toutiao-two/./src/views/user-profile/components/updata-birthday.vue?4b20","webpack://toutiao-two/./src/views/article/components/updata-photo.vue","webpack://toutiao-two/src/views/article/components/updata-photo.vue","webpack://toutiao-two/./src/views/article/components/updata-photo.vue?1d30","webpack://toutiao-two/./src/views/article/components/updata-photo.vue?bb43","webpack://toutiao-two/src/views/user-profile/index.vue","webpack://toutiao-two/./src/views/user-profile/index.vue?658b","webpack://toutiao-two/./src/views/user-profile/index.vue?f01e","webpack://toutiao-two/./src/api/user.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"user-profile\"},[_c('van-nav-bar',{staticClass:\"page-nav-bar\",attrs:{\"title\":\"个人信息\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.back()}}}),_c('input',{ref:\"file\",attrs:{\"type\":\"file\",\"hidden\":\"\"},on:{\"change\":_vm.onFileChange}}),_c('van-cell',{attrs:{\"title\":\"头像\",\"is-link\":\"\"},on:{\"click\":function($event){return _vm.$refs.file.click()}}},[_c('van-image',{staticClass:\"avatar\",attrs:{\"fit\":\"cover\",\"round\":\"\",\"src\":_vm.user.photo}})],1),_c('van-cell',{attrs:{\"title\":\"昵称\",\"value\":_vm.user.name,\"is-link\":\"\"},on:{\"click\":function($event){_vm.isUpdataNameShow=true}}}),_c('van-cell',{attrs:{\"title\":\"性别\",\"value\":_vm.user.gender===0?'男':'女',\"is-link\":\"\"},on:{\"click\":function($event){_vm.isUpdataGenderShow=true}}}),_c('van-cell',{attrs:{\"title\":\"生日\",\"value\":_vm.user.birthday,\"is-link\":\"\"},on:{\"click\":function($event){_vm.isUpdataBirthdayShow=true}}}),_c('van-popup',{staticClass:\"popup\",style:({ height: '100%' }),attrs:{\"position\":\"bottom\"},model:{value:(_vm.isUpdataNameShow),callback:function ($$v) {_vm.isUpdataNameShow=$$v},expression:\"isUpdataNameShow\"}},[(_vm.isUpdataNameShow)?_c('UpdataName',{on:{\"close\":function($event){_vm.isUpdataNameShow=false}},model:{value:(_vm.user.name),callback:function ($$v) {_vm.$set(_vm.user, \"name\", $$v)},expression:\"user.name\"}}):_vm._e()],1),_c('van-popup',{staticClass:\"popup\",attrs:{\"position\":\"bottom\"},model:{value:(_vm.isUpdataGenderShow),callback:function ($$v) {_vm.isUpdataGenderShow=$$v},expression:\"isUpdataGenderShow\"}},[(_vm.isUpdataGenderShow)?_c('UpdataGender',{on:{\"close\":function($event){_vm.isUpdataGenderShow=false}},model:{value:(_vm.user.gender),callback:function ($$v) {_vm.$set(_vm.user, \"gender\", $$v)},expression:\"user.gender\"}}):_vm._e()],1),_c('van-popup',{staticClass:\"popup\",attrs:{\"position\":\"bottom\"},model:{value:(_vm.isUpdataBirthdayShow),callback:function ($$v) {_vm.isUpdataBirthdayShow=$$v},expression:\"isUpdataBirthdayShow\"}},[(_vm.isUpdataBirthdayShow)?_c('UpdataBirthday',{on:{\"close\":function($event){_vm.isUpdataBirthdayShow=false}},model:{value:(_vm.user.birthday),callback:function ($$v) {_vm.$set(_vm.user, \"birthday\", $$v)},expression:\"user.birthday\"}}):_vm._e()],1),_c('van-popup',{staticClass:\"popup\",attrs:{\"position\":\"bottom\"},model:{value:(_vm.isUpdataPhotoShow),callback:function ($$v) {_vm.isUpdataPhotoShow=$$v},expression:\"isUpdataPhotoShow\"}},[_c('UpdataPhoto')],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"updata-name\"},[_c('van-nav-bar',{attrs:{\"title\":\"设置昵称\",\"left-text\":\"取消\",\"right-text\":\"完成\"},on:{\"click-left\":function($event){return _vm.$emit('close')},\"click-right\":_vm.onfinish}}),_c('div',{staticClass:\"field-wrap\"},[_c('van-field',{staticClass:\"field\",attrs:{\"rows\":\"2\",\"autosize\":\"\",\"autofocus\":true,\"type\":\"textarea\",\"maxlength\":\"8\",\"placeholder\":\"请输入昵称\",\"show-word-limit\":\"\"},model:{value:(_vm.localName),callback:function ($$v) {_vm.localName=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"localName\"}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"updata-name\">\r\n    <van-nav-bar\r\n      title=\"设置昵称\"\r\n      left-text=\"取消\"\r\n      @click-left=\"$emit('close')\"\r\n      right-text=\"完成\"\r\n      @click-right=\"onfinish\"\r\n    ></van-nav-bar>\r\n\r\n    <div class=\"field-wrap\">\r\n      <van-field\r\n        class=\"field\"\r\n        v-model.trim=\"localName\"\r\n        rows=\"2\"\r\n        autosize\r\n        :autofocus=\"true\"\r\n        type=\"textarea\"\r\n        maxlength=\"8\"\r\n        placeholder=\"请输入昵称\"\r\n        show-word-limit\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { updataUserProfile } from \"@/api/user\";\r\nexport default {\r\n  name: \"UpdataName\",\r\n  props: {\r\n    value: {\r\n      type: String,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      localName: this.value\r\n    };\r\n  },\r\n  methods: {\r\n    async onfinish() {\r\n      // 自定义加载图标\r\n      this.$toast.loading({\r\n        message: \"保存中...\",\r\n        forbidClick: true, // 禁止背景点击\r\n         duration: 0 // 持续展示\r\n      });\r\n      try {\r\n        // 判断设置内容是否为空\r\n        if (!this.localName.length) {\r\n          return this.$toast(\"昵称不能为空\");\r\n        }\r\n        await updataUserProfile({\r\n          name: this.localName\r\n        });\r\n        // 更新视图\r\n        this.$emit(\"input\", this.localName);\r\n        // 关闭弹出层\r\n        this.$emit(\"close\");\r\n        // 提示\r\n        this.$toast.success(\"设置成功\");\r\n      } catch (err) {\r\n        this.$toast.fail(\"设置失败\");\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.updata-name {\r\n  .field-wrap {\r\n    padding: 20px;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./updata-name.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./updata-name.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./updata-name.vue?vue&type=template&id=75db1e6f&scoped=true&\"\nimport script from \"./updata-name.vue?vue&type=script&lang=js&\"\nexport * from \"./updata-name.vue?vue&type=script&lang=js&\"\nimport style0 from \"./updata-name.vue?vue&type=style&index=0&id=75db1e6f&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"75db1e6f\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"updata-gender\"},[_c('van-picker',{attrs:{\"title\":\"标题\",\"show-toolbar\":\"\",\"columns\":_vm.columns,\"default-index\":_vm.value},on:{\"cancel\":function($event){return _vm.$emit('close')},\"confirm\":_vm.onConfirm,\"change\":_vm.onPickerChange}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"updata-gender\">\r\n    <van-picker\r\n      title=\"标题\"\r\n      show-toolbar\r\n      :columns=\"columns\" \r\n      :default-index=\"value\"\r\n       @cancel=\"$emit('close')\"\r\n      @confirm=\"onConfirm\"\r\n      @change=\"onPickerChange\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {updataUserProfile} from '@/api/user'\r\nexport default {\r\n  name: \"UpdataGender\",\r\n  props: {\r\n    value: {\r\n      type: Number,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      columns: [\"男\", \"女\"],\r\n      localGender: this.value\r\n    };\r\n  },\r\n  methods: {\r\n      async onConfirm() {\r\n         this.$toast.loading({\r\n        message: '保存中...',\r\n        forbidClick: true, // 禁止背景点击\r\n        duration: 0 // 持续展示\r\n      })\r\n        try{\r\n            await updataUserProfile({\r\n                gender:this.localGender\r\n            })\r\n              // 更新视图\r\n            this.$emit('input', this.localGender)\r\n             // 关闭弹层\r\n            this.$emit('close')\r\n            // 提示成功\r\n            this.$toast.success('设置成功')\r\n        } catch (err) {\r\n             this.$toast('设置失败')\r\n        }\r\n    },\r\n      onPickerChange(picker, value, index) {\r\n        this.localGender=index\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./updata-gender.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./updata-gender.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./updata-gender.vue?vue&type=template&id=085fb3b4&\"\nimport script from \"./updata-gender.vue?vue&type=script&lang=js&\"\nexport * from \"./updata-gender.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"updata-birthday\"},[_c('van-datetime-picker',{attrs:{\"type\":\"date\",\"title\":\"选择年月日\",\"min-date\":_vm.minDate,\"max-date\":_vm.maxDate},on:{\"cancel\":function($event){return _vm.$emit('close')},\"confirm\":_vm.onConfirm},model:{value:(_vm.currentDate),callback:function ($$v) {_vm.currentDate=$$v},expression:\"currentDate\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"updata-birthday\">\r\n    <van-datetime-picker\r\n      v-model=\"currentDate\"\r\n      type=\"date\"\r\n      title=\"选择年月日\"\r\n      :min-date=\"minDate\"\r\n      :max-date=\"maxDate\"\r\n      @cancel=\"$emit('close')\"\r\n      @confirm=\"onConfirm\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { updataUserProfile } from \"@/api/user\";\r\nimport dayjs from \"dayjs\";\r\nexport default {\r\n  name: \"UpdataBirthday\",\r\n  props: {\r\n    value: {\r\n      type: String,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      minDate: new Date(1970, 0, 1),\r\n      maxDate: new Date(),\r\n      currentDate: new Date(this.value)\r\n    };\r\n  },\r\n  methods: {\r\n    async onConfirm() {\r\n      this.$toast.loading({\r\n        message: \"保存中...\",\r\n        forbidClick: true, // 禁止背景点击\r\n        duration: 0 // 持续展示\r\n      });\r\n\r\n      try {\r\n        await updataUserProfile({\r\n          birthday: dayjs(this.currentDate).format(\"YYYY-MM-DD\")\r\n        });\r\n         // 更新视图\r\n        this.$emit('input', dayjs(this.currentDate).format(\"YYYY-MM-DD\"))\r\n\r\n        // 关闭弹层\r\n        this.$emit('close')\r\n\r\n        // 提示成功\r\n        this.$toast.success('更新成功')\r\n      } catch (err) {\r\n          this.$toast.fail('更新失败')\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./updata-birthday.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./updata-birthday.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./updata-birthday.vue?vue&type=template&id=8b64213e&\"\nimport script from \"./updata-birthday.vue?vue&type=script&lang=js&\"\nexport * from \"./updata-birthday.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"updata-photo\"},[_vm._v(\"1\")])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"updata-photo\">1</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\nname:'UpdataPhoto'\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./updata-photo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./updata-photo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./updata-photo.vue?vue&type=template&id=1cb88ec2&\"\nimport script from \"./updata-photo.vue?vue&type=script&lang=js&\"\nexport * from \"./updata-photo.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"user-profile\">\r\n    <!-- 导航栏 -->\r\n    <van-nav-bar class=\"page-nav-bar\" title=\"个人信息\" left-arrow @click-left=\"$router.back()\" />\r\n   \r\n   <input type=\"file\" hidden ref=\"file\" @change=\"onFileChange\">\r\n   \r\n    <!-- 个人信息 -->\r\n    <van-cell title=\"头像\" @click=\"$refs.file.click()\" is-link>\r\n      <van-image\r\n     class=\"avatar\"\r\n        fit=\"cover\"\r\n        round\r\n        :src=\"user.photo\"\r\n      />\r\n    </van-cell>\r\n    <van-cell title=\"昵称\" \r\n    @click=\"isUpdataNameShow=true\"\r\n    :value=\"user.name\" is-link />\r\n    <van-cell title=\"性别\" @click=\"isUpdataGenderShow=true\" :value=\"user.gender===0?'男':'女'\" is-link />\r\n    <van-cell @click=\"isUpdataBirthdayShow=true\" title=\"生日\" :value=\"user.birthday\" is-link />\r\n\r\n    <!--编辑昵称  -->\r\n    <van-popup class=\"popup\" v-model=\"isUpdataNameShow\"\r\n     position=\"bottom\" \r\n     :style=\"{ height: '100%' }\">\r\n     <UpdataName v-if=\"isUpdataNameShow\" v-model=\"user.name\" @close=\"isUpdataNameShow=false\"></UpdataName>\r\n     </van-popup>\r\n\r\n     <!-- 设置性别 -->\r\n     <van-popup class=\"popup\" v-model=\"isUpdataGenderShow\"\r\n     position=\"bottom\">\r\n    <UpdataGender v-if=\"isUpdataGenderShow\" v-model=\"user.gender\" @close=\"isUpdataGenderShow=false\"></UpdataGender>\r\n     </van-popup>\r\n\r\n     <!-- 设置生日 -->\r\n     <van-popup class=\"popup\" v-model=\"isUpdataBirthdayShow\"\r\n     position=\"bottom\">\r\n        <UpdataBirthday v-if=\"isUpdataBirthdayShow\" v-model=\"user.birthday\" @close=\"isUpdataBirthdayShow=false\"></UpdataBirthday>\r\n     </van-popup>\r\n\r\n     <!-- 编辑头像 -->\r\n     <van-popup class=\"popup\" v-model=\"isUpdataPhotoShow\"\r\n     position=\"bottom\">\r\n        <UpdataPhoto></UpdataPhoto>\r\n     </van-popup>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {getUserProfile} from '@/api/user'\r\nimport UpdataName from './components/updata-name.vue';\r\nimport UpdataGender from './components/updata-gender.vue';\r\nimport UpdataBirthday from './components/updata-birthday.vue';\r\nimport UpdataPhoto from '../article/components/updata-photo.vue';\r\nexport default {\r\n    name: \"UserProfile\",\r\n    data() {\r\n        return {\r\n            user: {},\r\n            isUpdataNameShow: false,//昵称\r\n            isUpdataGenderShow: false,// 性别\r\n            isUpdataBirthdayShow: false, //生日\r\n            isUpdataPhotoShow:false\r\n        };\r\n    },\r\n    created() {\r\n        this.loadUserProfile();\r\n    },\r\n    methods: {\r\n        async loadUserProfile() {\r\n            try {\r\n                const { data } = await getUserProfile();\r\n                console.log(\"用户个人信息\", data);\r\n                this.user = data.data;\r\n            }\r\n            catch (err) {\r\n                this.$toast(\"获取数据失败\");\r\n            }\r\n        },\r\n        onFileChange() {\r\n            const file = this.$refs.file.files[0]\r\n            console.log('111', file);\r\n            const data = window.URL.createObjectURL(file)\r\n            console.log('222',data);\r\n        }\r\n    },\r\n    components: { UpdataName, UpdataGender, UpdataBirthday, UpdataPhoto }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.user-profile{\r\n    .avatar{\r\n        width: 60px;\r\n        height: 60px;\r\n    }\r\n    .popup{\r\n        background-color: #f8f8f8;\r\n    }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=6de41157&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=6de41157&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6de41157\",\n  null\n  \n)\n\nexport default component.exports","// 用户请求相关模块\r\n\r\nimport request from \"@/utils/request\";\r\n\r\n// import store from '@/store'\r\n\r\nconsole.log('用户请求相关模块', request);\r\nexport const login = data => {\r\n    return request({\r\n        method: \"POST\",\r\n        url: '/v1_0/authorizations',\r\n        data\r\n    })\r\n}\r\n\r\n// 发送短信验证码\r\n\r\nexport const sendSms = mobile => {\r\n    return request({\r\n        method: 'GET',\r\n        url:`/v1_0/sms/codes/${mobile}`\r\n    })\r\n}\r\n\r\n\r\n// 用户个人资料\r\nexport const getUserInfo = () => {\r\n    return request({\r\n        method: 'GET',\r\n        url: '/v1_0/user',\r\n        // // 发送请求头数据\r\n        // headers: {\r\n        //       // 注意：该接口需要授权才能访问，token的数据格式：Bearer token数据，注意 Bearer 后面有个空格\r\n        //     Authorization: `Bearer ${store.state.user.token}`\r\n        // }\r\n    })\r\n}\r\n\r\n// 获取用户选择的频道列表\r\nexport const getUserChannel = () => {\r\n    return request({\r\n        method: 'GET',\r\n        url:'/v1_0/user/channels'\r\n    })\r\n}\r\n\r\n\r\n// 添加关注 target 为作者id\r\nexport const addFollow = target => {\r\n    return request({\r\n        method: 'POST',\r\n        url: '/v1_0/user/followings',\r\n        data: {\r\n            target\r\n        }\r\n    })\r\n}\r\n// 取消关注 target 为作者id\r\nexport const deleteFollow = target => {\r\n    return request({\r\n        method: 'DELETE',\r\n        url: `/v1_0/user/followings/${target}`,\r\n    })\r\n}\r\n\r\n// 用户个人信息\r\nexport const getUserProfile = ()=> {\r\n    return request({\r\n        method: 'GET',\r\n        url:'/v1_0/user/profile'\r\n    })\r\n}\r\n\r\n// 更新用户个人信息\r\nexport const updataUserProfile = data => {\r\n    return request({\r\n        method: 'PATCH',\r\n        url: '/v1_0/user/profile',\r\n        data\r\n    })\r\n}"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","$event","$router","back","ref","onFileChange","$refs","file","click","user","photo","name","isUpdataNameShow","gender","isUpdataGenderShow","birthday","isUpdataBirthdayShow","style","height","model","value","callback","$$v","expression","$set","_e","isUpdataPhotoShow","staticRenderFns","$emit","onfinish","localName","trim","props","type","required","data","methods","message","forbidClick","duration","component","columns","onConfirm","onPickerChange","localGender","minDate","maxDate","currentDate","_v","created","console","components","UpdataName","UpdataGender","UpdataBirthday","UpdataPhoto","log","request","login","method","url","sendSms","mobile","getUserInfo","getUserChannel","addFollow","target","deleteFollow","getUserProfile","updataUserProfile"],"sourceRoot":""}